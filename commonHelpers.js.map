{"version":3,"file":"commonHelpers.js","sources":["../src/js/unsplash-api.js","../src/js/refs.js","../src/js/create-markup.js","../src/js/loader.js","../src/js/loadMore.js","../src/js/gallery.js"],"sourcesContent":["import axios from 'axios';\naxios.defaults.baseURL = 'https://api.unsplash.com';\n\nexport async function getPhotos(q, page) {\n  const API_KEY = 'LxvKVGJqiSe6NcEVZOaLXC-f2JIIWZaq_o0WrF8mwJc';\n\n  try {\n    const response = await axios.get('/search/photos', {\n      params: {\n        query: q,\n        page,\n        per_page: 12,\n        orientation: 'portrait',\n        client_id: API_KEY,\n      },\n    });\n    return response.data;\n  } catch (err) {\n    console.error(err.status);\n  }\n}\n","export const refs = {\n  form: document.querySelector('.search-form'),\n  galleryList: document.querySelector('.gallery'),\n  loader: document.querySelector('.loader'),\n  loadMore: document.querySelector('.load-more-btn'),\n};\n","export function createMarkup(array) {\n  return array\n    .map(\n      item =>\n        `<li class=\"gallery-item\"><img src=\"${item.urls.small}\" alt=\"${item.description}\"></li>`\n    )\n    .join('');\n}\n","import { refs } from './refs';\nexport function showLoader() {\n  refs.loader.classList.remove('is-hidden');\n}\n\nexport function hideLoader() {\n  refs.loader.classList.add('is-hidden');\n}\n","import { refs } from './refs';\nexport function showBtn() {\n  refs.loadMore.classList.remove('is-hidden');\n}\n\nexport function hideBtn() {\n  refs.loadMore.classList.add('is-hidden');\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { getPhotos } from './unsplash-api';\nimport { refs } from './refs';\nimport { createMarkup } from './create-markup';\nimport { showLoader, hideLoader } from './loader';\nimport { showBtn, hideBtn } from './loadMore';\n\nrefs.form.addEventListener('submit', onSubmit);\nrefs.loadMore.addEventListener('click', onClick);\n\nlet page = 1;\nlet searchQuery = null;\n\nasync function onSubmit(event) {\n  event.preventDefault();\n  page = 1;\n  showLoader();\n  refs.galleryList.innerHTML = '';\n  searchQuery = event.currentTarget.elements.search.value.trim();\n\n  try {\n    const response = await getPhotos(searchQuery, page);\n    if (response.results.length === 0) {\n      return iziToast.error({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'bottomRight',\n      });\n    }\n    refs.galleryList.innerHTML = createMarkup(response.results);\n    showBtn();\n  } catch (error) {\n    console.log(error);\n  } finally {\n    hideLoader();\n    event.target.reset();\n  }\n}\n\nasync function onClick() {\n  page += 1;\n  // iii\n  showLoader();\n  try {\n    const response = await getPhotos(searchQuery, page);\n    const lastPage = Math.ceil(response.total / 12);\n    refs.galleryList.insertAdjacentHTML(\n      'beforeend',\n      createMarkup(response.results)\n    );\n    if (lastPage === page) {\n      hideBtn();\n      iziToast.info({\n        message: 'The end',\n      });\n    }\n  } catch (error) {\n    console.log(error);\n  } finally {\n    hideLoader();\n  }\n}\n"],"names":["axios","getPhotos","q","page","API_KEY","err","refs","createMarkup","array","item","showLoader","hideLoader","showBtn","hideBtn","onSubmit","onClick","searchQuery","event","response","iziToast","error","lastPage"],"mappings":"6vBACAA,EAAM,SAAS,QAAU,2BAElB,eAAeC,EAAUC,EAAGC,EAAM,CACvC,MAAMC,EAAU,8CAEhB,GAAI,CAUF,OATiB,MAAMJ,EAAM,IAAI,iBAAkB,CACjD,OAAQ,CACN,MAAOE,EACP,KAAAC,EACA,SAAU,GACV,YAAa,WACb,UAAWC,CACZ,CACP,CAAK,GACe,IACjB,OAAQC,EAAK,CACZ,QAAQ,MAAMA,EAAI,MAAM,CACzB,CACH,CCpBO,MAAMC,EAAO,CAClB,KAAM,SAAS,cAAc,cAAc,EAC3C,YAAa,SAAS,cAAc,UAAU,EAC9C,OAAQ,SAAS,cAAc,SAAS,EACxC,SAAU,SAAS,cAAc,gBAAgB,CACnD,ECLO,SAASC,EAAaC,EAAO,CAClC,OAAOA,EACJ,IACCC,GACE,sCAAsCA,EAAK,KAAK,KAAK,UAAUA,EAAK,WAAW,SAClF,EACA,KAAK,EAAE,CACZ,CCNO,SAASC,GAAa,CAC3BJ,EAAK,OAAO,UAAU,OAAO,WAAW,CAC1C,CAEO,SAASK,GAAa,CAC3BL,EAAK,OAAO,UAAU,IAAI,WAAW,CACvC,CCNO,SAASM,GAAU,CACxBN,EAAK,SAAS,UAAU,OAAO,WAAW,CAC5C,CAEO,SAASO,GAAU,CACxBP,EAAK,SAAS,UAAU,IAAI,WAAW,CACzC,CCCAA,EAAK,KAAK,iBAAiB,SAAUQ,CAAQ,EAC7CR,EAAK,SAAS,iBAAiB,QAASS,CAAO,EAE/C,IAAIZ,EAAO,EACPa,EAAc,KAElB,eAAeF,EAASG,EAAO,CAC7BA,EAAM,eAAc,EACpBd,EAAO,EACPO,IACAJ,EAAK,YAAY,UAAY,GAC7BU,EAAcC,EAAM,cAAc,SAAS,OAAO,MAAM,OAExD,GAAI,CACF,MAAMC,EAAW,MAAMjB,EAAUe,EAAab,CAAI,EAClD,GAAIe,EAAS,QAAQ,SAAW,EAC9B,OAAOC,EAAS,MAAM,CACpB,QACE,2EACF,SAAU,aAClB,CAAO,EAEHb,EAAK,YAAY,UAAYC,EAAaW,EAAS,OAAO,EAC1DN,GACD,OAAQQ,EAAO,CACd,QAAQ,IAAIA,CAAK,CACrB,QAAY,CACRT,IACAM,EAAM,OAAO,OACd,CACH,CAEA,eAAeF,GAAU,CACvBZ,GAAQ,EAERO,IACA,GAAI,CACF,MAAMQ,EAAW,MAAMjB,EAAUe,EAAab,CAAI,EAC5CkB,EAAW,KAAK,KAAKH,EAAS,MAAQ,EAAE,EAC9CZ,EAAK,YAAY,mBACf,YACAC,EAAaW,EAAS,OAAO,CACnC,EACQG,IAAalB,IACfU,IACAM,EAAS,KAAK,CACZ,QAAS,SACjB,CAAO,EAEJ,OAAQC,EAAO,CACd,QAAQ,IAAIA,CAAK,CACrB,QAAY,CACRT,GACD,CACH"}